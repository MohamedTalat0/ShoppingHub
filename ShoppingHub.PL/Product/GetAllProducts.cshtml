@* @model ShoppingHub.BLL.ModelVm.GetAllProductsVM

@{
    ViewData["Title"] = "All Products";
}

<div class="container my-5">
    <h2 class="text-center mb-4">Available at Shoppify</h2>

    <!-- Filters -->
    <form method="get" asp-action="GetAllProducts" class="row g-3 mb-4">
        <div class="col-md-4">
            <input type="text" name="SearchTerm" value="@Model.SearchTerm" class="form-control" placeholder="Search products..." />
        </div>
        <div class="col-md-3">
            <select name="SelectedCategoryId" class="form-select">
                <option value="">All Categories</option>
                @foreach (var cat in Model.Categories ?? new List<ShoppingHub.DAL.Entities.Category>())
                {
                        <option value="@cat.Id" selected="@(Model.SelectedCategoryId == cat.Id)">
                        @cat.Name
                        </option>
                }
            </select>
        </div>
        <div class="col-md-2">
            <input type="number" name="MinPrice" value="@Model.MinPrice" class="form-control" placeholder="Min Price" />
        </div>
        <div class="col-md-2">
            <input type="number" name="MaxPrice" value="@Model.MaxPrice" class="form-control" placeholder="Max Price" />
        </div>
        <div class="col-md-1 d-grid">
            <button type="submit" class="btn btn-primary">Filter</button>
        </div>
    </form>

    <!-- Product Cards -->
    <div class="row row-cols-1 row-cols-md-3 g-4">
        @if (Model.Products != null && Model.Products.Any())
        {
            foreach (var item in Model.Products)
            {
                        <div class="col">
                            <div class="card h-100 shadow-sm border-0">
                                <img src="@item.ImagePath" class="card-img-top" alt="@item.ProductName" style="height:200px; object-fit:cover;">
                                <div class="card-body text-center">
                                    <h5 class="card-title" style="color:#B57EDC; font-family:'Comic Sans MS', cursive;">
                                @item.ProductName
                                    </h5>
                                    <p class="card-text fw-bold text-dark">$@item.Price</p>
                                    <button class="btn btn-outline-primary">
                                        <i class="bi bi-cart3"></i> Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
            }
        }
        else
        {
                <p class="text-center">No products available yet.</p>
        }
    </div>

    <!-- Pagination -->
    @if (Model.TotalPages > 1)
    {
            <nav class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item @(Model.PageNumber <= 1 ? "disabled" : "")">
                        <a class="page-link" asp-action="GetAllProducts" asp-route-PageNumber="@(Model.PageNumber - 1)">Previous</a>
                    </li>

                @for (int i = 1; i <= Model.TotalPages; i++)
                {
                            <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                                <a class="page-link" asp-action="GetAllProducts" asp-route-PageNumber="@i">@i</a>
                            </li>
                }

                    <li class="page-item @(Model.PageNumber >= Model.TotalPages ? "disabled" : "")">
                        <a class="page-link" asp-action="GetAllProducts" asp-route-PageNumber="@(Model.PageNumber + 1)">Next</a>
                    </li>
                </ul>
            </nav>
    }
</div>
 *@

@*  @model ShoppingHub.BLL.ModelVm.GetAllProductsVM

@{
    ViewData["Title"] = "Products";
}

<div class="container my-4">
    <h2 class="mb-4 text-center text-primary">Products</h2>

    <!-- Filters -->
    <form asp-action="GetAllProducts" method="get" class="row g-3 mb-4">
        <div class="col-md-3">
            <input type="text" asp-for="SearchTerm" class="form-control" placeholder="Search products..." />
        </div>

        <div class="col-md-3">
            <select asp-for="SelectedCategoryId" class="form-select" asp-items="@(new SelectList(Model.Categories, "Id", "Name"))">
                <option value="">-- All Categories --</option>
            </select>
        </div>

        <div class="col-md-2">
            <input type="number" asp-for="MinPrice" class="form-control" placeholder="Min Price" />
        </div>

        <div class="col-md-2">
            <input type="number" asp-for="MaxPrice" class="form-control" placeholder="Max Price" />
        </div>

        <div class="col-md-2 d-grid">
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-search"></i> Filter
            </button>
        </div>
    </form>

    <!-- Products -->
    <div class="row">
        @if (Model.Products != null && Model.Products.Any())
        {
            foreach (var item in Model.Products)
            {
                        <div class="col-md-3 mb-4">
                            <div class="card shadow-sm h-100">
                                <img src="@item.ImagePath" class="card-img-top" alt="@item.ProductName" style="height:200px; object-fit:cover;" />
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title text-center text-secondary">@item.ProductName</h5>
                                    <p class="card-text text-center fw-bold text-success">$@item.Price</p>
                                    <a href="#" class="btn btn-outline-primary mt-auto">
                                        <i class="bi bi-cart"></i> Add to Cart
                                    </a>
                                </div>
                            </div>
                        </div>
            }
        }
        else
        {
                <p class="text-center text-muted">No products available.</p>
        }
    </div>

    <!-- Pagination -->
    @if (Model.TotalItems > Model.PageSize)
    {
        var totalPages = (int)Math.Ceiling((double)Model.TotalItems / Model.PageSize);

            <nav>
                <ul class="pagination justify-content-center">
                @for (int i = 1; i <= totalPages; i++)
                {
                            <li class="page-item @(Model.PageNumber == i ? "active" : "")">
                                <a class="page-link"
                                   asp-action="GetAllProducts"
                                   asp-route-PageNumber="@i"
                                   asp-route-SearchTerm="@Model.SearchTerm"
                                   asp-route-SelectedCategoryId="@Model.SelectedCategoryId"
                                   asp-route-MinPrice="@Model.MinPrice"
                                   asp-route-MaxPrice="@Model.MaxPrice">
                            @i
                                </a>
                            </li>
                }
                </ul>
            </nav>
    }
</div> *@
@model ShoppingHub.BLL.ModelVm.GetAllProductsVM

@{
    ViewData["Title"] = "Products";
    Layout = "~/Views/Shared/_NewLayout.cshtml";
}

<div class="container my-4" style="background-color: #f8f9ff; border-radius: 12px; padding: 20px;">
    <h2 class="mb-4 text-center" style="font-size: 2rem; color: #6f42c1; font-weight: bold;">
        Our Available Products
    </h2>

    <!-- Filters -->
    <form asp-action="GetAllProducts" method="get" class="row g-3 mb-4">
        <div class="col-md-3">
            <input type="text" asp-for="SearchTerm" class="form-control" placeholder="Search products..." />
        </div>

        <div class="col-md-3">
            <select asp-for="SelectedCategoryId" class="form-select" asp-items="@(new SelectList(Model.Categories, "Id", "Name"))">
                <option value="">-- All Categories --</option>
            </select>
        </div>

        <div class="col-md-2">
            <input type="number" asp-for="MinPrice" class="form-control" placeholder="Min Price" />
        </div>

        <div class="col-md-2">
            <input type="number" asp-for="MaxPrice" class="form-control" placeholder="Max Price" />
        </div>

        <div class="col-md-2 d-grid">
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-search"></i> Filter
            </button>
        </div>
    </form>

    <!-- Products -->
    <div class="row">
        @if (Model.Products != null && Model.Products.Any())
        {
            foreach (var item in Model.Products)
            {
                        <div class="col-md-3 mb-4">
                            <div class="card shadow-sm h-100">
                                <img src="@item.ImagePath" class="card-img-top" alt="@item.ProductName" style="height:200px; object-fit:cover;" />
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title text-center text-secondary">@item.ProductName</h5>
                                    <p class="card-text text-center fw-bold text-success">$@item.Price</p>
                                    <a href="#" class="btn btn-outline-primary mt-auto">
                                        <i class="bi bi-cart"></i> Add to Cart
                                    </a>
                                </div>
                            </div>
                        </div>
            }
        }
        else
        {
                <p class="text-center text-muted">No products available.</p>
        }
    </div>

    <!-- Pagination -->
    @if (Model.TotalItems > Model.PageSize)
    {
        var totalPages = (int)Math.Ceiling((double)Model.TotalItems / Model.PageSize);

            <nav>
                <ul class="pagination justify-content-center">
                @for (int i = 1; i <= totalPages; i++)
                {
                            <li class="page-item @(Model.PageNumber == i ? "active" : "")">
                                <a class="page-link"
                                   asp-action="GetAllProducts"
                                   asp-route-PageNumber="@i"
                                   asp-route-SearchTerm="@Model.SearchTerm"
                                   asp-route-SelectedCategoryId="@Model.SelectedCategoryId"
                                   asp-route-MinPrice="@Model.MinPrice"
                                   asp-route-MaxPrice="@Model.MaxPrice">
                            @i
                                </a>
                            </li>
                }
                </ul>
            </nav>
    }
</div>


